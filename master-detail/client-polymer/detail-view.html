<script src="bower_components/webcomponentsjs/webcomponents-lite.js"></script>
<link rel="import" href="bower_components/polymer/polymer.html">
<!-- <link rel="import" href="bower_components/dolphin-platform-polymer/dolphin-controller.html"> -->
<link rel="import" href="bower_components/dolphin-platform-polymer/remoting-controller.html">

<dom-module id="detail-view">
    <template>
        <!-- <dolphin-controller id="controller" name="DetailController" model="{{model}}"></dolphin-controller> -->

        <remoting-controller id="controller" name="DetailController" model="{{model}}" on-postconstruct="myMethod" on-postdestroyed="otherMethod"></remoting-controller>
        <div>ID: [[model.id]]</div>
        <div>Name: [[model.name]]</div>
        <div>Description: [[model.description]]</div>
    </template>
    <script>
        HTMLImports.whenReady(function () {
            Polymer({
                is: 'detail-view',
                properties: {
                    id: {
                        type: Number
                    }
                },
                myMethod(event) {

                    var poly = this;
                    poly.set('model.id', poly.id);
                    poly.$.controller.invoke("reload");


                    setTimeout(function () {
                        poly.set('model.name', "TestValue");
                    }, 5000);
                },
                otherMethod(event) {
                    console.log('bye!');
                }
            });
        });
    </script>
</dom-module>
